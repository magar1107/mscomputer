// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Admin users can read/write all data
    match /admin/{document=**} {
      allow read, write: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
    }

    // Products collection - EVERYONE can read, only admin can write
    match /products/{document=**} {
      allow read: if true; // Allow all users (including anonymous) to read products
      allow write: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
    }

    // Banners collection - EVERYONE can read, only admin can write
    match /banners/{document=**} {
      allow read: if true; // Allow all users (including anonymous) to read banners
      allow write: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
    }

    // Contact collection - EVERYONE can read, only admin can write
    match /contact/{document=**} {
      allow read: if true; // Allow all users (including anonymous) to read contact info
      allow write: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
    }

    // Orders collection - EVERYONE can create orders, only admin can read/update/delete
    match /orders/{document=**} {
      allow read: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
      allow create: if true; // Allow all users (including anonymous) to create orders
      allow update, delete: if request.auth != null &&
        request.auth.token.email in [
          'admin@mscomputersangola.com',
          'your-email@example.com'
        ];
    }
  }
}
